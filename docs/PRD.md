# PRD (Product Requirements Document)

## 차 vs 대중교통 | 금융 의사결정 서비스

**문서 버전**: v1.0
**작성일**: 2026-02-12
**서비스 URL**: http://localhost:3000

---

## 1. 제품 개요

### 1.1 제품 비전

> 감정적 결정이 아닌, 객관적인 수치에 근거한 교통수단 선택을 돕는 금융 의사결정 서비스

사회 초년생과 직장인들이 자가용 구매 시 할부금만을 주요 비용으로 고려하는 경향이 있으나, 실제 자동차 소유 비용은 보험료·세금·감가상각·기회비용 등 숨겨진 비용(Hidden Cost)이 전체의 50% 이상을 차지한다. 본 서비스는 이러한 비용을 정밀하게 분석하여 합리적인 의사결정을 지원한다.

### 1.2 핵심 가치 제안

| 구분 | 설명 |
|---|---|
| 총비용 정밀 비교 | 자가용 7개 항목 vs 대중교통 2개 항목의 연간/월간 비용 |
| 손익분기점 시각화 | 15년간 누적 순비용 교차 시점 (중고차 잔존가치 반영) |
| 재정 부담률 분석 | 연봉 대비 비용 비율, 자산 대비 차량 가격 비율 |
| 맞춤 추천 | 자가용 유리 → 차량 구매 서비스 / 대중교통 유리 → 투자 전략 추천 |

### 1.3 타겟 사용자

- **주 타겟**: 연봉 2,000~6,000만원, 사회 초년생 및 직장인
- **페르소나**: 연봉 4,000만원, 자산 3,000만원, 편도 통근 15km의 직장인
- **사용 시나리오**: 생애 첫 차 구매 고민, 기존 자가용 유지 vs 처분 검토

---

## 2. 기술 스택

| 영역 | 기술 | 버전 |
|---|---|---|
| 프레임워크 | Next.js (App Router) | 16.1.6 |
| UI 라이브러리 | React | 19.2.3 |
| 스타일링 | Tailwind CSS | 4.x |
| 차트 | Recharts | 3.7.0 |
| 주식 데이터 | yahoo-finance2 | 2.14.0 |
| 빌드 도구 | Turbopack | (Next.js 내장) |
| 린트 | ESLint | 9.x |
| 상태 관리 | React useState + localStorage + sessionStorage | - |

---

## 3. 사용자 흐름 (User Flow)

```
                    ┌──────────────────┐
                    │   랜딩 페이지 (/)  │
                    │  서비스 소개, CTA  │
                    └────────┬─────────┘
                             │ "분석 시작"
                             ▼
                    ┌──────────────────┐
                    │ 정보 입력 (/input) │
                    │  6개 필수 입력     │
                    │  + 할부/운영비 옵션 │
                    └────────┬─────────┘
                             │ "비용 분석 시작"
                             ▼
                    ┌──────────────────┐
                    │ 비용 분석 (/result)│
                    │  비교·차트·부담률    │
                    │  추천 결과 배너     │
                    └────────┬─────────┘
                             │
                ┌────────────┴────────────┐
                ▼                         ▼
       ┌────────────────┐       ┌────────────────┐
       │ 차량 추천 (/car) │       │ 투자 추천         │
       │ 차량 목록        │       │ (/invest)       │
       │ 할부 계산기       │       │ 투자 전략         │
       │                │       │ 종목·ETF 추천     │
       └────────────────┘       └────────────────┘
                │                         │
                └────────────┬────────────┘
                             ▼
                    "다시 분석하기" → /input (입력값 보존)
```

---

## 4. 기능 상세 요구사항

### FR-01. 랜딩 페이지 (`/`)

| 항목 | 설명 |
|---|---|
| 목적 | 서비스 소개 및 분석 유도 |
| 구성 요소 | Hero 섹션, 3개 기능 카드(총비용 비교·손익분기점·맞춤 추천), 3단계 이용방법, CTA 배너 |
| 인터랙션 | "무료 분석 시작하기" → `/input` 라우팅 |

### FR-02. 정보 입력 페이지 (`/input`)

#### FR-02-1. 기본 입력 (필수 6개 항목)

| 필드 | 단위 | 입력 형태 | 유효성 검증 |
|---|---|---|---|
| 연봉 | 만원 | 텍스트 (콤마 자동 포맷) | ≥ 100만원 |
| 보유 자산 | 만원 | 텍스트 (콤마 자동 포맷) | ≥ 0 |
| 월 고정 지출 | 만원 | 텍스트 (콤마 자동 포맷) | 필수 입력 |
| 편도 통근 거리 | km | 숫자 | > 0 |
| 주간 통근 횟수 | 회 | 퀵 버튼 (3~7회) |
| 주말 외출 횟수 | 회 | 숫자 (기본값 4) | 
| 주말 외출 거리 | km | 숫자 (기본값 30) |
| 희망 차량 가격 | 만원 | 텍스트 (콤마 자동 포맷) + 가격대 퀵 버튼 | ≥ 500만원 |
|	선수금 비율	| % |	숫자 |	0 ~ 100% |
|	할부 기간 |	개월 | 숫자 |	6 ~ 120개월 |
|	할부 금리	| %	 | 숫자 |	0 ~ 30% |


#### FR-02-2. 차량 가격대 퀵 선택

| 카테고리 | 가격 범위 | 대표 차종 |
|---|---|---|
| 경차/소형 | 1,000~2,000만원 | 모닝, 캐스퍼, 아반떼, 레이, 스파크 |
| 준중형/중형 | 2,000~3,500만원 | 쏘나타, K5, 투싼, 니로 하이브리드 |
| 중대형/대형 | 3,500~5,000만원 | 그랜저, K8, 싼타페, EV6 |
| 프리미엄 | 5,000~8,000만원 | 제네시스 G80/GV70, BMW 3, 벤츠 C |
| 럭셔리 | 8,000만원 이상 | 제네시스 G90, BMW 5, 벤츠 E, GV80 |

#### FR-02-3. 할부 옵션 (선택)

| 필드 | 기본값 | 입력 형태 | 유효성 검증 |
|---|---|---|---|
| 구매 방식 | 일시불 | 토글 버튼 (일시불/할부) | - |
| 선수금 비율 | 30% | 숫자 + 퀵 버튼 (10/20/30/50%) | 0~100% |
| 할부 기간 | 48개월 | 숫자 + 퀵 버튼 (24/36/48/60개월) | 6~120개월 |
| 연 이자율 | 4.5% | 숫자 + 퀵 버튼 (3.5/4.5/5.5/7.0%) | 0~30% |

#### FR-02-4. 운영비 상세 설정 (접이식 패널)

| 필드 | 단위 | 기본값 | 비고 |
|---|---|---|---|
| 평균 연비 | km/L | 12.5 | 휘발유 기준 |
| 연간 보험료 | 만원 | (자동 계산) | 차량가격 × 3.5%, 60~200만원 |
| 연간 자동차세 | 만원 | (자동 계산) | 가격대별 30~65만원 |
| 연간 정비비 | 만원 | 80 | 연 80만원 |
| 월 주차비 | 만원 | 12 | 수도권 기준 |
| 월 기타비용 | 만원 | 5 | 세차·통행료·검사비 등 |

#### FR-02-5. 입력값 영속성

| 기능 | 저장 위치 | 트리거 |
|---|---|---|
| 폼 상태 보존 | sessionStorage | 필드 변경 시 즉시 저장 |
| 분석 데이터 전달 | localStorage | 폼 제출 시 저장 |
| 재분석 시 복원 | sessionStorage | 페이지 로드 시 자동 복원 |

#### FR-02-6. 유효성 검증 UX

- 미입력/이상치 발생 시 **첫 번째 에러 필드**로 자동 스크롤 (`scrollIntoView`)
- 스크롤 완료 후 400ms 뒤 해당 `<input>` 자동 포커스
- 에러 메시지: 필드 하단 빨간색 텍스트 표시
- 에러 필드: 빨간색 테두리 + 배경 하이라이트

### FR-03. 비용 분석 결과 페이지 (`/result`)

#### FR-03-1. 입력 정보 요약

- 6개 필수 입력값 + 할부 옵션(활성 시) 카드 형태 요약 표시

#### FR-03-2. 추천 배너

| 조건 | 배너 색상 | 메시지 | CTA 버튼 |
|---|---|---|---|
| 자가용 추천 (`score > 0`) | 파란 그라데이션 | "자가용 구매를 추천합니다" | "차량 추천 보기" → `/car` |
| 대중교통 추천 (`score ≤ 0`) | 초록 그라데이션 | "대중교통 이용을 추천합니다" | "투자 전략 보기" → `/invest` |

- 판단 근거: 점수 기반 시스템의 개별 사유 목록 표시

#### FR-03-3. 추천 결정 알고리즘 (점수 기반)

| 판단 기준 | 자가용 점수 | 대중교통 점수 | 조건 |
|---|---|---|---|
| 비용 비교 | +2 | -1 | 자가용 연간비용 < 대중교통 |
| 연봉 대비 부담률 | +1~+2 | -2 | 30% 기준 (자산 보유시 보정) |
| 자산 대비 차량가격 | +1~+3 | -2 | 50% 기준 |
| 통근 거리 | +2 | -1 | ≥30km 또는 ≤10km |
| 최소 자산 미달 | - | -3 | 자산 < 1,000만원 |
| 월 여유자금 부족 | - | -2 | 여유자금 < 월 자가용 비용 |
| 할부 이자 부담 | - | -1 | 이자 > 차량가격의 10% |

#### FR-03-4. 재정 부담률 분석

| 지표 | 계산 | 권장 기준 | 시각화 |
|---|---|---|---|
| 연봉 대비 자가용 비용 | 자가용 연간비용 ÷ 연봉 | ≤ 30% | 게이지 바 (초과 시 빨간색) |
| 자산 대비 차량 가격 | 차량가격 ÷ 보유자산 | ≤ 50% | 게이지 바 (초과 시 빨간색) |

#### FR-03-5. 월간 비용 비교 카드

| 항목 | 자가용 세부 (7개) | 대중교통 세부 (2개) |
|---|---|---|
| 비용 항목 | 할부 원금, 할부 이자, 감가상각, 유류비, 보험료, 자동차세, 정비비, 주차비, 기타 | 교통카드/정기권, 택시 보조비 |
| 표시 | 월간 총액 + 연간 총액 | 월간 총액 + 연간 총액 |
| 비교 | 저렴한 쪽에 "유리" 뱃지 + 하이라이트 | |
| 하단 | 월간 비용 차이 금액 표시 | |

#### FR-03-6. 손익분기점 차트

| 요소 | 설명 |
|---|---|
| 차트 유형 | Recharts LineChart (3개 라인) |
| 파란 점선 | 자가용 총 지출 (매각 전) |
| 파란 실선 | 자가용 순비용 (매각 후, 잔존가치 차감) |
| 녹색 실선 | 대중교통 누적비용 |
| 교차점 표시 | 노란색 ReferenceDot (손익분기점) |
| 분석 기간 | 15년 |
| 하단 요약 | 총 지출, 순비용, 대중교통 비용, 손익분기점 4개 카드 |
| 잔존가치 안내 | 15년 후 예상 매각가 표시 |
| 커스텀 툴팁 | 총 지출 → 잔존가치 차감 → 순비용 산식 표시 |

#### FR-03-7. 비용 구성 파이차트

- 자가용 7개 비용 항목의 비율을 도넛 차트로 시각화
- 항목별 비중(%) 및 금액 범례 표시

#### FR-03-8. 실시간 유가 반영

| 단계 | 데이터 소스 | 캐시 |
|---|---|---|
| 1순위 | OPINET API | 30분 TTL |
| 2순위 (fallback) | 네이버 스크래핑 | |
| 3순위 (fallback) | 정적 기본값 (1,650원/L) | |

### FR-04. 차량 추천 페이지 (`/car`)

| 기능 | 설명 |
|---|---|
| 예산 분석 | 보유 자산 기반 추천 예산 표시 |
| 카테고리 탭 | 5개 가격대별 탭 (경차~럭셔리) |
| 차량 카드 | 차명, 가격, 차종 뱃지, 연비, 자동차세, 예상 월비용, 장점 목록 |
| 할부 계산기 | 선수금 슬라이더(0~70%), 기간 버튼, 금리 타입 선택 |
| 계산 결과 | 월 납입금, 총 납입금, 총 이자 표시 |

차량 데이터: 5개 카테고리, 총 28종 차량 (국산차·수입차·전기차·하이브리드 포함)

### FR-05. 투자 추천 페이지 (`/invest`)

#### FR-05-1. 절약금 분석

- 연간 절약 금액 = 자가용 연간비용 - 대중교통 연간비용
- 월 투자 가능 금액 산출

#### FR-05-2. 투자 성향별 포트폴리오 (3종)

| 성향 | 위험도 | 기대수익 | 자산배분 (예금/채권/주식/기타) |
|---|---|---|---|
| 안정형 | 1 | 3~5% | 40 / 35 / 15 / 10 |
| 균형형 | 2 | 5~8% | 20 / 25 / 40 / 15 |
| 성장형 | 3 | 8~12% | 10 / 10 / 65 / 15 |

- 추천 성향 자동 선택: 연봉 ≥5,000 & 자산 ≥10,000 → 성장형 / 연봉 ≥3,000 or 자산 ≥5,000 → 균형형 / 기타 → 안정형

#### FR-05-3. 추천 투자 상품

| 카테고리 | 상품 수 | 예시 |
|---|---|---|
| ETF (국내/해외 지수) | 5종 | KODEX 200, TIGER 미국S&P500, TIGER 나스닥100 |
| ETF (배당) | 2종 | KODEX 배당가치, TIGER 미국배당+7%프리미엄 |
| ETF (섹터) | 3종 | KODEX 2차전지, TIGER 반도체, KODEX 바이오 |
| ETF (리츠) | 1종 | TIGER 리츠부동산인프라 |
| 개별 주식 | 10종 | 삼성전자, SK하이닉스, 현대차, NAVER, 카카오 등 |
| 채권 ETF | 4종 | KODEX 국고채10년, TIGER 미국채10년선물 등 |
| 예금/적금 | 5종 | 정기예금, 적금, CMA, 청년도약계좌, ISA |
| 대체자산 | 2종 | KODEX 골드선물, KODEX 은선물 |

#### FR-05-4. 실시간 주식 시세

| 항목 | 설명 |
|---|---|
| 데이터 소스 | Yahoo Finance API (`yahoo-finance2`) |
| 대상 | 35개 한국 주식/ETF 티커 (KRX) |
| 캐시 | 서버 측 15분 TTL |
| 표시 | 현재가, 전일 대비 등락(원), 등락률(%) |
| Fallback | API 실패 시 가격 미표시 (상품 정보만 표시) |

#### FR-05-5. 자산배분 차트 & 복리 시뮬레이션

- 도넛 차트: 성향별 자산배분 비율 시각화
- 10년 복리 예상 자산 계산 (성향별 기대수익률 적용)

### FR-06. API 엔드포인트

| 엔드포인트 | 메서드 | 목적 | 캐시 TTL |
|---|---|---|---|
| `/api/fuel-price` | GET | 실시간 유가 조회 (휘발유/경유/LPG) | 30분 |
| `/api/exchange-rate` | GET | 실시간 환율 조회 (USD/EUR/JPY) | 1시간 |
| `/api/stocks` | GET | 한국 주식/ETF 실시간 시세 조회 | 15분 |

---

## 5. 핵심 계산 로직

### 5.1 자가용 연간 비용

```
감가상각  = 차량가격 × (전년도 잔존가치율 - 당해 잔존가치율) x 차종 보종계수
할부비   = 차량가격 - 선수금
유류비    = (편도거리 × 2 × 주당횟수 × 52주) ÷ 연비 × 유가
보험료    = 차량가격 × 3.5% (min 60만, max 200만) 또는 사용자 입력
자동차세  = 가격대별 30~65만원 또는 사용자 입력
정비비    = 연 80만원 (사용자 조정 가능)
주차비    = 월 12만원 × 12 (사용자 조정 가능)
기타      = 월 5만원 × 12 (사용자 조정 가능)
─────────────────────────────────────────
연간 총비용 = (할부비 또는 감가상각비) + 운영비 합계
월간 총비용 = 연간 총비용 ÷ 12
연간 할부비용 = 월 납입금 x 12
```

### 5.2 대중교통 연간 비용

```
정기권    = 월 65,000원 × 12
택시보조  = 통근거리 기반 (≤10km: 5만, ≤25km: 10만, >25km: 15만) × 12
─────────────────────────────────────────
연간 총비용 = (정기권 + 택시보조) × 12
```

### 5.3 잔존가치율 (한국 중고차 시장 기준)

```
0년: 100% → 1년: 82% → 2년: 72% → 3년: 63% → 4년: 55% → 5년: 48%
6년: 42% → 7년: 37% → 8년: 33% → 9년: 29% → 10년: 26%
11년: 23% → 12년: 21% → 13년: 19% → 14년: 17% → 15년: 16%
15년 초과: 연 2%씩 추가 하락 (최소 5% 유지)
```

### 5.4 손익분기점 (순비용 기반)

```
자가용 순비용 = 총 현금 지출 + 잔여 대출금 - 차량 잔존가치
대중교통 누적 = Σ(연도별 대중교통 비용)
손익분기점    = 대중교통 누적 > 자가용 순비용이 되는 최초 연도
```

### 5.5 할부 계산 (원리금균등상환)

```
월 납입금 = P × r × (1+r)^n / ((1+r)^n - 1)
  P = 대출 원금 (차량가격 × (1 - 선수금비율))
  r = 월 이자율 (연이자율 / 12)
  n = 할부 개월수
```

---

## 6. 비기능 요구사항

### NFR-01. 성능

| 항목 | 기준 |
|---|---|
| 초기 로드 | Turbopack 기반 빌드 최적화 |
| API 응답 | 서버 캐시로 반복 요청 최소화 |
| 차트 렌더링 | Recharts ResponsiveContainer 사용 |

### NFR-02. 반응형 디자인

| 뷰포트 | 레이아웃 |
|---|---|
| 모바일 (<768px) | 단일 컬럼, 스택 배치 |
| 태블릿/데스크탑 (≥768px) | 2~3 컬럼 그리드 |

### NFR-03. 데이터 저장

| 저장소 | 용도 | 수명 |
|---|---|---|
| sessionStorage | 폼 입력값 보존 (재분석 시 복원) | 탭 세션 동안 |
| localStorage | 분석 결과 데이터 (페이지 간 전달) | 영구 (수동 삭제까지) |
| 서버 메모리 캐시 | API 응답 캐시 | TTL 기반 (15분~1시간) |

### NFR-04. 에러 처리

| 상황 | 처리 |
|---|---|
| localStorage 없음 (직접 URL 접근) | `/input`으로 리다이렉트 |
| API 호출 실패 | Fallback 데이터 사용 (정적 기본값) |
| 입력값 미입력/이상치 | 첫 번째 에러 필드로 스크롤 + 포커스 |

### NFR-05. 접근성 & 국제화

| 항목 | 상태 |
|---|---|
| 언어 | 한국어 단일 |
| HTML lang 속성 | `ko` |
| 폰트 | Geist Sans (Google Fonts) |
| 통화 표기 | 한국 원화 (만원/억원 단위) |

---

## 7. 엣지 케이스

| 상황 | 처리 |
|---|---|
| 자산 1,000만원 미만 | -3점 감점, 대중교통 강력 추천 |
| 연봉 대비 비용 30% 초과 | -2점 감점 + 재정 부담 경고 |
| 자산 대비 차량가격 50% 초과 | -2점 감점 + 재정 부담 경고 |
| 편도 30km 이상 | +2점 가산, 자가용 편의성 반영 |
| 편도 10km 이하 | -1점, 대중교통 효율성 반영 |
| 월 여유자금 < 자가용 월비용 | -2점 감점 + 지출 초과 경고 |
| 고자산 보유 (자산으로 10년 충당 가능) | 소득 부담률 보정 (+1점) |
| 할부 이자 > 차량가격의 10% | -1점, 이자 부담 경고 |
| 잔존가치 15년 초과 추정 | 연 2% 하락, 최소 5% 유지 |

---

## 8. 페이지 구성 및 컴포넌트 맵

### 8.1 페이지 라우트

| 경로 | 페이지 | 렌더링 | 인증 |
|---|---|---|---|
| `/` | 랜딩 | Static (SSG) | 불필요 |
| `/input` | 정보 입력 | Static (SSG) | 불필요 |
| `/result` | 비용 분석 결과 | Static (SSG) + CSR | localStorage 필요 |
| `/car` | 차량 추천 | Static (SSG) + CSR | localStorage 필요 |
| `/invest` | 투자 추천 | Static (SSG) + CSR | localStorage 필요 |
| `/api/fuel-price` | 유가 API | Dynamic (서버) | 불필요 |
| `/api/exchange-rate` | 환율 API | Dynamic (서버) | 불필요 |
| `/api/stocks` | 주식시세 API | Dynamic (서버) | 불필요 |

### 8.2 컴포넌트 트리

```
RootLayout (layout.js)
├── Header (common/Header.js)
├── main
│   ├── [/] Home (page.js)
│   │   ├── FeatureCard ×3
│   │   └── StepCard ×3
│   │
│   ├── [/input] InputPage (input/page.js)
│   │   ├── StepIndicator
│   │   └── InputForm (input/InputForm.js)
│   │       └── InputField ×N (forwardRef)
│   │
│   ├── [/result] ResultPage (result/page.js)
│   │   ├── StepIndicator
│   │   ├── ResultDashboard (result/ResultDashboard.js)
│   │   │   ├── SummaryItem ×N
│   │   │   ├── RecommendationBanner (result/RecommendationBanner.js)
│   │   │   ├── GaugeCard ×2
│   │   │   ├── CostComparisonCard (result/CostComparisonCard.js)
│   │   │   │   └── CostRow ×N
│   │   │   ├── BreakEvenChart (result/BreakEvenChart.js)
│   │   │   └── CostPieChart (result/CostPieChart.js)
│   │   └── Disclaimer
│   │
│   ├── [/car] CarPage (car/page.js)
│   │   ├── StepIndicator
│   │   ├── CarRecommendation (car/CarRecommendation.js)
│   │   ├── LoanCalculator (car/LoanCalculator.js)
│   │   └── Disclaimer
│   │
│   └── [/invest] InvestPage (invest/page.js)
│       ├── StepIndicator
│       ├── InvestmentStrategy (invest/InvestmentStrategy.js)
│       ├── StockRecommendation (invest/StockRecommendation.js)
│       ├── AllocationChart (invest/AllocationChart.js)
│       └── Disclaimer
│
└── Footer (common/Footer.js)
```

---

## 9. 데이터 소스 및 기준

| 데이터 | 기준 시점 | 출처 |
|---|---|---|
| 중고차 잔존가치율 | 2024~2025년 | 한국 중고차 시장 실거래 데이터 (국산차 평균) |
| 차량 가격/제원 | 2024~2025년 | 국내 신차 가격표 |
| 유가 | 실시간 | OPINET / 네이버 |
| 보험료 요율 | 2024~2025년 | 차량가격 × 3.5% 근사치 |
| 자동차세 | 2024~2025년 | 배기량 기반 세율 |
| 대중교통 정기권 | 2024~2025년 | 기후동행카드 / K-패스 기준 |
| 주식/ETF 시세 | 실시간 | Yahoo Finance API |
| 투자 상품 정보 | 2024~2025년 | 한국 상장 ETF/주식 |

---

## 10. 면책조항

- 본 서비스의 모든 정보는 **참고용**이며, 실제 비용은 개인 상황에 따라 다를 수 있음
- 투자 정보는 **투자 권유가 아니며**, 투자 손실은 투자자 본인에게 귀속
- 차량 가격 및 유지비는 2024~2025년 기준 평균값
- 중고차 잔존가치율은 국산차 평균 기준이며, 차종/상태에 따라 상이
